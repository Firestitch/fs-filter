<div class="fs-filter" fxLayout="row" fxLayoutAlign="start stretch" *ngIf="config?.items?.length"
     [ngClass]="{
     'filters-open': showFilterMenu,
     loading: loading,
     'no-input': !showFilterInput
     }">
  <div fxLayou="row" fxLayoutAlign="start center" class="menu-filter" fxFlex>
    <div class="menu-filter-input" fxFlex="grow">
      <div class="main-filter-bar" fxLayout="row" fxLayoutAlign="start center">
        <form autocomplete="off" role="presentation">
          <mat-form-field class="filter-input" floatLabel="never">
            <span matPrefix><mat-icon matPrefix>search</mat-icon></span>

            <input matInput [(ngModel)]="searchText" name="filter-input"
                  #searchTextInput
                  (ngModelChange)="modelChange(searchText)">

            <mat-placeholder>Search</mat-placeholder>
            <a matSuffix
              *ngIf="searchText && showFilterInput"
              (click)="clear($event)"
              class="clear">
              <mat-icon>clear</mat-icon>
            </a>
            <a (click)="reload($event)" matSuffix class="reload">
              <mat-icon>refresh</mat-icon>
            </a>
            <a (click)="switchFilterVisibility($event)" matSuffix class="filter">
              <mat-icon>filter_list</mat-icon>
            </a>
            <span class="active-filters-counter"
                  matSuffix
                  (click)="switchFilterVisibility($event)"
                  *ngIf="activeFiltersCount > 0">
              {{ activeFiltersCount }}
            </span>
            <span class="active-filters-counter with-input"
                  matSuffix
                  (click)="switchFilterVisibility($event)"
                  *ngIf="activeFiltersWithInputCount > 0">
              {{ activeFiltersWithInputCount }}
            </span>
          </mat-form-field>
        </form>
        <filters-list [items]="config.items"
                      [showSortBy]="showSortBy"
                      [sortBy]="config.sortByItem"
                      [sortDirection]="config.sortDirectionItem"
                      (filterChanged)="filterChange($event)"
                      (search)="search()"
                      (clear)="clear()">
        </filters-list>

      </div>
      <div class="backdrop" *ngIf="showFilterMenu" (click)="switchFilterVisibility()"></div>
    </div>
  </div>
</div>
