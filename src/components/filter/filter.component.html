<div class="fs-filter" fxLayout="row" fxLayoutAlign="start stretch" *ngIf="config?.items?.length"
     [ngClass]="{
     'filters-open': showFilterMenu,
     loading: loading,
     'no-input': !showFilterInput
     }"
>
  <div *ngIf="!config.inline" fxLayou="row" fxLayoutAlign="start center" class="menu-filter" fxFlex>
    <div class="menu-filter-input" fxFlex="grow">
      <div class="main-filter-bar" fxLayout="row" fxLayoutAlign="start center">
        <form autocomplete="off" role="presentation">
          <mat-form-field class="filter-input" floatLabel="never">
            <span matPrefix><mat-icon matPrefix>search</mat-icon></span>

            <input matInput [(ngModel)]="searchText" name="filter-input"
                  #searchTextInput
                  (ngModelChange)="modelChange(searchText)">

            <mat-placeholder>Search</mat-placeholder>
            <a matSuffix
              *ngIf="searchText && showFilterInput"
              (click)="clear($event)">
              <mat-icon>clear</mat-icon>
            </a>
            <a (click)="reload($event)" matSuffix *ngIf="config.reload !== false">
              <mat-icon>refresh</mat-icon>
            </a>
            <a (click)="switchFilterVisibility($event)" matSuffix>
              <mat-icon>filter_list</mat-icon>
            </a>
            <span class="active-filters-counter"
                  matSuffix
                  (click)="switchFilterVisibility($event)"
                  *ngIf="activeFiltersCount > 0">
              {{ activeFiltersCount }}
            </span>
            <span class="active-filters-counter with-input"
                  matSuffix
                  (click)="switchFilterVisibility($event)"
                  *ngIf="activeFiltersWithInputCount > 0">
              {{ activeFiltersWithInputCount }}
            </span>
          </mat-form-field>
        </form>
        <filters-list [items]="config.items"
                      [showSortBy]="showSortBy"
                      [sortBy]="config.sortByItem"
                      [sortDirection]="config.sortDirectionItem"
                      [inline]="config.inline"
                      (filterChanged)="filterChange($event)"
                      (search)="search()"
                      (clear)="clear()">
        </filters-list>
        <!--<div class="inline-actions" fxLayout="row" fxLayoutAlign="start center">
          <a class="action-clear" (click)="clearSearchInput()" *ngIf="searchText && showFilterInput">
            <mat-icon>clear</mat-icon>
          </a>
          <a (click)="reload()" class="action-reload">
            <mat-icon>refresh</mat-icon>
          </a>
          <a (click)="switchFilterVisibility()" class="action-filter">
            <mat-icon>filter_list</mat-icon>
          </a>
          <span class="active-filters-counter" *ngIf="activeFiltersCount > 0">( {{ activeFiltersCount }} )</span>
          <span class="active-filters-counter with-input" *ngIf="activeFiltersWithInputCount > 0">( {{ activeFiltersWithInputCount }} )</span>
        </div>-->
      </div>
      <div class="backdrop" *ngIf="showFilterMenu" (click)="switchFilterVisibility()"></div>

      <!--<div class="backdrop" *ngIf="extendedFilter" (click)="filterToggle(false,true)"></div>-->
    </div>
  </div>

  <div *ngIf="config.inline" class="inline-filter" [ngClass]="{'inline': config.inline}">
    <filters-list [items]="config.items"
                  [sortBy]="config.sortByItem"
                  [inline]="config.inline"
                  (filterChanged)="filterChange($event)"
                  (search)="search()">
    </filters-list>
  </div>
</div>
